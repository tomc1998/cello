(fn extern glfwInit void ())
(fn extern glfwCreateWindow u64 (width u64 height u64 title (ptr u8) monitor u64 share u64))
(fn extern glfwWindowShouldClose u64 (window u64))
(fn extern glfwMakeContextCurrent void (window u64))
(fn extern glfwSwapBuffers void (window u64))
(fn extern glfwPollEvents void ())
(fn extern printf void (fmt (ptr u8) &rest))
(fn extern glClear void (buffer u64))
(fn extern glClearColor void (r f32 g f32 b f32 a f32))
(fn extern glBegin void (type u64))
(fn extern glEnd void ())
(fn extern glVertex2f void (x f32 y f32))

(fn main u8 ()
  (glfwInit)
  (let GL_COLOR_BUFFER_BIT u64 (* 16 (* 16 (* 16 4))))
  (let GL_TRIANGLES u64 4)
  (let window u64 (glfwCreateWindow 800 600 c"Cello GLFW Test" 0 0))
  (printf c"Window handle: %d\n" window)
  (glfwMakeContextCurrent window)
  (glClearColor 0 0 0 0)
  (while (== (glfwWindowShouldClose window) 0)
    (glfwPollEvents)
    (glClear GL_COLOR_BUFFER_BIT)
    (glBegin GL_TRIANGLES)
    (glVertex2f 0 0)
    (glVertex2f 1 0)
    (glVertex2f 1 1)
    (glEnd)
    (glfwSwapBuffers window))
  0
)